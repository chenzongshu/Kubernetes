# 前言



以docker和kubernetes为代表的的容器技术现在在市场上接受度越来越高，业界现在也有较多成熟产品，公有云有阿里华为腾通，私有云有OpenShift，才云，青云kubesphere，Rancher，灵雀云都做的不错， 为什么我们还折腾自建的容器平台？



- 1、自己搭建过的东西更加有掌控力，据我交流，不少公司在体量到了一定程度之后都走上了自建的道路
- 2、自己搭建过后才对整体框架有了一个清晰的认知。



主要是结合自己的理解和实践，手把手教还不太熟悉容器的同学搭建一套自己的容器平台



# 什么是容器云

不想去拷贝网上的各种文章，简单说下自己的理解，VM和容器的优劣不想过多讨论，但是谷歌错过了云计算的浪潮，让AWS占据先机之后，大力推动容器技术，也是想争夺话语权。至于docker和各个巨头的腥风血雨，更是一言难尽。



现在的容器云标准几乎就是以kubernetes为编排工具调度容器运行到虚拟机或者物理机上，对计算资源进行编排的一套技术，最后取了一个牛掰哄哄的名字：云原生 （虽然云原生是Pivotal提出的，但是谷歌成立的CNCF把这概念推广开）



# 业界主流容器云

这里特指私有云，当然私有云也可以搭建在公有云服务器上，组成混合云



总体来说，各家技术框架大同小异，都是围绕着kubernetes生态做了挺多外围工作，

- OpenShift

  红帽的技术实力毋庸置疑，OpenShift 3.x和4.x部署架构区别较大，特别是4.x，OS必须为CoreOS，容器运行时也是主推rkt，虽然做了不少优化，用了25个operator来部署，对于自行运维，想了解部署、架构、细节的朋友实在是太不友好，问题定位较麻烦，多说一句，4.x必须联网才能部署

  帮助文档是所有私有云里面最详细的，这点大赞

- 才云

  个人觉得功能做的挺全，标榜AI的Clever平台较厚重，做了好几个开源项目集成在产品内，这对于生产维护来说是一个风险点

- 青云kubesphere

  kubesphere界面做的挺漂亮，一键安装比较实用，只是配置文件对于不太熟悉的朋友不算友好，更多感觉想推用户部署在他们自己公有云上。

- Rancher

  用做多集群管理还不错，技术实力也不错

  

# 自建容器云



我在VMVare上用了4个虚拟机，采用单master架构，不过会介绍我的三个master的高可用方案，用的 keepalived   + haproxy，使用静态Pod部署，算是一个创新吧。